{% load static %}

<script src="{% static 'js/lib/binarytransport/jquery.binarytransport.js' %}" type="text/javascript"></script>
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>


<div id="highcharts_container"></div>





<script>
    let datasetName = "{{ set_name }}";
    let chart_title = "{{ data_title }}"
</script>

<script src="{% static 'js/repBench/mainChart/additionalSeriesManager.js' %}"  type="text/javascript"></script>
<script src="{% static 'js/repBench/mainChart/mainChart.js' %}"  type="text/javascript"></script>
    <script>
        const initialChartLength = "{{ data_info.length }}"
        const timeInterval =  "{{ data_info.time_interval }}"
        console.log("TIME INTER VAL " , timeInterval)
    </script>

{% if highcharts_series %}

    <script>
        console.log("series provided")
        console.log(JSON.parse('{{ highcharts_series|safe }}'))
        const highcharts_data = JSON.parse('{{ highcharts_series|safe }}')
        console.log(highcharts_data)
        createEmptyChart(initialChartLength)
        initMainChart(highcharts_data,true)
    </script>
{% else %}
    <script>
        console.log("try to fetch data")
        let data_url = '{% url data_fetch_url_name setname=setname  %}' + '?RepBenchWeb={{ RepBenchWeb|default_if_none:5 }}'
        createEmptyChart(initialChartLength)
        let mainChartFetchPromise = fetchMainChartData(data_url);
    </script>
{% endif %}


{#<script src="{% static 'js/export.js' %}" type="text/javascript"></script>#}
