{% extends "base.html" %}
{% load static %}

<!-- base template with a chart container of a dataset-->
{% block chartScript %}

{% endblock %}


{% block chart %}
    {#    <!--end: Inner Row -->#}
    {#    <style>#}
    {##}
    {#        #chart-right::-webkit-scrollbar {#}
    {#            width: 10px;#}
    {#        }#}
    {##}
    {#        /* Handle */#}
    {#        #chart-right::-webkit-scrollbar-thumb {#}
    {#            background: grey;#}
    {##}
    {#        }#}
    {##}
    {#        /* Handle on hover */#}
    {#        #chart-right::-webkit-scrollbar-thumb:hover {#}
    {#            background: #555;#}
    {#        }#}
    {#    </style>#}
    <style>  .full-height {
        height: 90vh;
    {#float: right;#}
    }

    .margin-top-20 {
        margin-top: 55px;
        left: 0;
        padding-right: 15px !important;
        padding-left: 15px !important;
        margin-right: auto !important;
        margin-left: auto !important;
    }
    </style>

    <div class="row margin-top-20">
        <div class="col-md-9" style="position:relative;">
            <div style="text-align:right;position:absolute;right:0%;top:2%;z-index: 1;">
                {% block graphbuttons %}
{#                    <div class="form-group" style="position:absolute; top: 77px; right:85px; z-index: 1;">#}
{#                    Data:#}
{#                    <div class="btn-group" role="group">#}
{#                        <button id="rawButton" type="button" class="btn btn-default btn-sm active">Raw</button>#}
{#                        <button id="zButton" type="button" class="btn btn-default btn-sm">Z-Score</button>#}
{#                        <button id="minMaxButton" type="button" class="btn btn-default btn-sm">Min-Max</button>#}
{#                    </div>#}
{#                </div>#}
                    <button id="swap_norm" onclick="swap_norm()" class="btn btn-primary">Normalize Data</button>
                {% endblock %}
            </div>
            <div id="highcharts_container" class="full-height"></div>
        </div>
        <div id="chart-right" class="col-md-3" >
            {% block first_form %}
{#                <div class="kt-portlet" data-ktportlet="true">#}
{#                    <div class="kt-portlet__head">#}
{#                        <div class="kt-portlet__head-label">#}
{#                            <h3 class="kt-portlet__head-title">Anomaly Injection</h3>#}
{#                        </div>#}
{#                        <div class="kt-portlet__head-toolbar">#}
{#                            <div class="kt-portlet__head-group">#}
{#                                <a href="#" data-ktportlet-tool="toggle"#}
{#                                   class="btn btn-sm btn-icon btn-default btn-icon-md myToggle"><i#}
{#                                        class="mdi mdi-chevron-down mdi-18px"></i></a>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                    <div class="kt-portlet__body kt-portlet__body--fit">#}
                        {% include 'sub/form.html' with form=injection_form form_id="injection_form" onclick="inject()" %}
{#                    </div>#}
{#                </div>#}

            {% endblock %}

            {% block second_form %}
{#                <div id="" class="kt-portlet kt-portlet--collapsed" data-ktportlet="true">#}
{#                    <div class="kt-portlet__head">#}
{#                        <div class="kt-portlet__head-label">#}
{#                            <h3 class="kt-portlet__head-title">Anomaly Repair</h3>#}
{#                        </div>#}
{#                        <div class="kt-portlet__head-toolbar">#}
{#                            <div class="kt-portlet__head-group">#}
{#                                <a id="repair-toggle" href="#" data-ktportlet-tool="toggle"#}
{#                                   class="btn btn-sm btn-icon btn-default btn-icon-md myToggle"><i#}
{#                                        class="mdi mdi-chevron-down mdi-18px"></i></a>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                    <div class="kt-portlet__body kt-portlet__body--fit">#}
                        {% include 'sub/repairForm.html' %}
{#                    </div>#}
{#                </div>#}

            {% endblock %}
            <div class="kt-portlet kt-portlet__body--fit">
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div class="kt-portlet__body">
                        {% block thirdblock %}

                        {% endblock %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div class="row margin-top-20">
      <div class="col-md-9" style="position:relative;">
      <div style="text-align:right;position:absolute;right:0%;top:2%;z-index: 1;">
                {% block graphbuttons2 %}
                    <button id="swap_norm" onclick="swap_norm()" class="btn btn-primary">Normalize Data</button>
                {% endblock %}
            </div>
            <div id="highcharts_container" class="full-height"></div>
        </div>
    </div>


    <div class=" col-lg-9 col-md-12 col-sm-12 col-xs-12">
    </div>
    <script>
        let datasetName = "{{ set_name }}";
        let chart_title = "{{ data_title }}"
        let data_url = '{% url "get_data" setname=setname  %}' + '?viz={{ viz|default_if_none:5 }}';

    </script>
    <script src="{% static 'js/additionalSeriesManager.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/lib/binarytransport/jquery.binarytransport.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/lib/highcharts/highstock.js' %}" type="text/javascript"></script>

    <script src="{% static 'js/custom/highcharts.utils.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/highcharts.line.view.init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/highcharts.actions.init.js' %}" type="text/javascript"></script>

    {#    <script src="https://code.highcharts.com/highcharts.js"></script>#}
    {#    <script src="https://code.highcharts.com/modules/boost.js"></script>#}
    {#    <script src="https://code.highcharts.com/modules/exporting.js"></script>#}

    <script src="{% static 'js/custom/form.extensions.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/mainChart.js' %}" type="text/javascript"></script>



{% endblock %}

{% block additional_bottom_js %}

    <script src="{% static 'js/custom/form.extensions.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/nouislider-init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/page.init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/form.init.js' %}" type="text/javascript"></script>

    <script type="text/javascript">
        let injection_url = "{% url 'inject_data' setname=setname %}"
        let repair_url = "{% url 'repair_data' setname=setname %}"
    </script>
    <script src="{% static 'js/injection.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/repair.js' %}" type="text/javascript"></script>


{% endblock %}

