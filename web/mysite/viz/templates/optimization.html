{% extends "base.html" %}
{% load static %}
{% block content %}
    <br>
    <div class="border" id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

    <div id="repair">
        {% include "sub/injectionForm.html" %}
        <div class="column">
        {% include "sub/bayesianForm.html" %}
        </div>
        <div class="container-fluid" style="min-width: 310px; height: 400px; margin: 0 auto">
            <div id="container-optscores"></div>
        </div>

    </div>

    {#        <div class="bayesian-opt-form">#}
    {##}
    {##}
    {#            {% for alg,params in b_opt_param_forms.items %}#}
    {#                {{ alg }}#}
    {#                <form class="bayesian-opt-form" id='{{ alg }}' onSubmit="return false">#}
    {#                    {% for param in params %}#}
    {#                        <label for="{{ param.param_name }}">{{ param.param_name }}</label>        <br>#}
    {#                        <input type="text" id="{{ param.param_name }}"#}
    {#                               size="15 " name="{{ param.param_name }}min"#}
    {#                               pattern="([+-]?([0-9]*[.])?[0-9]+)([\s,][+-]?([0-9]*[.])?[0-9]+)*" title="Must be a float value"#}
    {#                               value={{ param.min }}>#}
    {#                    {% endfor %}#}
    {##}
    {#                    <input type="submit" onclick="bayesian_opt_form('{{ alg }}')">#}
    {#                </form>#}
    {#            {% endfor %}#}
    {#        </div>#}




    </script>
    <script src="{% static  'js/scoreboard.js' %} " type="text/javascript"></script>
    <script src="{% static  'js/highchartsMainContainerInit.js' %} " type="text/javascript"></script>
    <script src="{% static  'js/highchartsInit.js' %}" type="text/javascript"></script>

    <script type="text/javascript">
        let data_url = '{% url "get_data" dataset=dataset %}'
        let selectionButton = document.getElementById("injection_button")
        let injection_url = "{% url 'inject' dataset=dataset %}"

        fetchChart(csrftoken, data_url)

        selectionButton.addEventListener("click", e => {
            e.stopPropagation()
            inject("injection_form", csrftoken, injection_url)
        })

        let optimization_url = "{% url 'optimize' dataset=dataset %}"
        let bayesian_opt_form = function (form_id) {
            optimizeCurrentData(form_id, csrftoken, optimization_url)
        }

    </script>

{% endblock %}
