{% extends "base.html" %}
{% load static %}

<!-- base template with a chart container of a dataset-->
{% block chartScript %}

{% endblock %}


{% block chart %}
    <style>  .full-height {
        height: 90vh;
    {#float: right;#}
    }

    .margin-top-20 {
        margin-top: 20px;
        left: 0;
    {#float: right;#}
    }

    </style>
    <div class="row full-height margin-top-20" style="
    padding-right: 15px !important;
    padding-left: 15px !important;
    margin-right: auto!important;
    margin-left: auto !important;">
    <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12 full-height ">
        <div class="kt-portlet full-height ">
            <div class="kt-portlet__head--sm">
                <div style="text-align:right;position:relative;top:110%;z-index: 1;margin-right: 20px">
                    {% block graphbuttons %}
                        <button onclick="swap_norm()" class="btn btn-warning">Reset</button>

                    {% endblock %}
                </div>
                {#                    <div class="kt-portlet__head-label">#}
                {#                        <h3 class="kt-portlet__head-title">{{ data_title }}</h3>#}
                {#                    </div>#}
                {#                    <div class="kt-portlet__head-toolbar">#}
                {#                        <div id="highcharts_head_actions" class="kt-portlet__head-actions">#}
                {#                            <a id="reset_chart_btn" href="#" class="btn btn-outline-brand btn-bold btn-sm">Reset</a>#}
                {#                            <div class="dropdown dropdown-inline">#}
                {#                                <a href="#" class="btn btn-outline-brand btn-icon btn-sm" data-toggle="dropdown"#}
                {#                                   aria-haspopup="true" aria-expanded="false">#}
                {#                                    <i class="mdi mdi-18px mdi-dots-horizontal"></i>#}
                {#                                </a>#}
                {#                                {% include 'vadetisweb/parts/misc/highcharts_line_dropdown.html' %}#}
                {#                            </div>#}
                {#                        </div>#}
                {#                    </div>#}
            </div>
            {#                <div class="kt-portlet__body kt-portlet__body--fit full-height">#}

            <!--begin: Highcharts -->
            <div id="highcharts_container" class="full-height"></div>
            <!--end: Highcharts -->
            {#                </div>#}
            {% block belowchart %}
            {% endblock %}
        </div>
        {#            <!--begin: Inner Row  block below the main chart -->#}
        {#            {% block innerRow %}#}
        {#            {% endblock %}#}
        {##}
        {#            <!--end: Inner Row -->#}
        <div>

        </div>
    </div>
    <!--end: Inner Row -->
    <style>

        ::-webkit-scrollbar {
            width: 10px;
        }


        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: grey;

        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>

    <div id="chart-right" class="col-lg-3 col-md-6 col-sm-6 col-xs-6 full-height"
         style="overflow-y: auto; overflow-y: auto; overflow-x:hidden;">
        {% block first_form %}
            <div class="kt-portlet" data-ktportlet="true">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title">Anomaly Injection</h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="kt-portlet__head-group">
                            <a href="#" data-ktportlet-tool="toggle"
                               class="btn btn-sm btn-icon btn-default btn-icon-md myToggle"><i
                                    class="mdi mdi-chevron-down mdi-18px"></i></a>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    {% include 'sub/form.html' with form=injection_form form_id="injection_form" onclick="inject()" %}
                </div>
            </div>

        {% endblock %}

        {% block second_form %}
            <div id="" class="kt-portlet kt-portlet--collapsed" data-ktportlet="true">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title">Anomaly Repair</h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="kt-portlet__head-group">
                            <a id="repair-toggle" href="#" data-ktportlet-tool="toggle"
                               class="btn btn-sm btn-icon btn-default btn-icon-md myToggle"><i
                                    class="mdi mdi-chevron-down mdi-18px"></i></a>
                        </div>
                    </div>
                </div>

                <div class="kt-portlet__body kt-portlet__body--fit">
                    {% include 'sub/repairForm.html' %}
                </div>
            </div>

        {% endblock %}
        <div class="kt-portlet kt-portlet__body--fit">
            <div class="kt-portlet__body kt-portlet__body--fit">
                <div class="kt-portlet__body">
                    {% block thirdblock %}

                    {% endblock %}
                </div>
            </div>
        </div>
    </div>


    <script>
        let datasetName = "{{ set_name }}";
        let chart_title = "{{ data_title }}"
        let data_url = '{% url "get_data" setname=setname  %}' + '?viz={{ viz|default_if_none:5 }}';

    </script>
    <script src="{% static 'js/additionalSeriesManager.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/lib/binarytransport/jquery.binarytransport.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/lib/highcharts/highstock.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/highcharts.utils.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/highcharts.line.view.init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/highcharts.actions.init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/custom/form.extensions.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/mainChart.js' %}" type="text/javascript"></script>



{% endblock %}

{% block additional_bottom_js %}

    <script src="{% static 'js/custom/form.extensions.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/nouislider-init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/page.init.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/page/detection/form.init.js' %}" type="text/javascript"></script>

    <script type="text/javascript">
        let injection_url = "{% url 'inject_data' setname=setname %}"
        let repair_url = "{% url 'repair_data' setname=setname %}"
    </script>
    <script src="{% static 'js/injection.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/repair.js' %}" type="text/javascript"></script>


{% endblock %}

