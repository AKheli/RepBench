<div class="dropdown d-flex p-3">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
            data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
        Select Algorithm
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        {% for key,params in b_opt_param_forms.items %}
            <a onclick="displayfuncOptForm('{{ key }}')" class="dropdown-item">{{ key }}</a>
        {% endfor %}
    </div>
</div>

{% for alg,params in b_opt_param_forms.items %}
    <form class="bayesian-opt-form" id='{{ alg }}'  onSubmit="return false" style="display:none;">
        {% for param in params %}
            <label for="{{ param.param_name }}">{{ param.param_name }}</label>        <br>
            min:<input type="text" id="{{ param.param_name }}"
                       size=3 name="{{ param.param_name }}-min"
                       pattern="[+-]?([0-9]*[.])?[0-9]+" title="Must be a float value"
                       value={{ param.min }}>
            max:<input type="text" id="{{ param.param_name }}"
                       size="3" name="{{ param.param_name }}-max"
                       pattern="[+-]?([0-9]*[.])?[0-9]+" title="Must be a float value"
                       value="{{ param.max }}">

        {% endfor %}
        <div>
            <input type="hidden" name="alg_type" value="{{ alg }}">

            {{ bayesian_opt_form.as_p }}
        </div>
        <input type="submit" onclick="bayesian_opt_form('{{ alg }}')">
    </form>
{% endfor %}
</div>

<script>
    let lastkey = null
    let displayfuncOptForm = function (key) {
        var x = document.getElementById(key);
        if (key !== lastkey && lastkey != null) {
            document.getElementById(lastkey).style.display = "none";
        }
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
        lastkey = key
    }
</script>

