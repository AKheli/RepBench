{% extends "base.html" %}
{% load static %}

{% block content %}
    <!-- Highcharts display -->
    <div class="border" id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <!-- Injection and repair -->
    <div id="repair">

    <div class="column">
        {% include "sub/injectionForm.html" %}

    </div>

    <div class="column">
        {% include "sub/repairForm.html" %}
        <div id="thatsreallywrong">
        </div>
    </div>



    <script src="{% static  'js/scoreboard.js' %} " type="text/javascript"></script>
    <script src="{% static  'js/highchartsMainContainerInit.js' %} " type="text/javascript"></script>
    <script src="{% static  'js/highchartsInit.js' %}" type="text/javascript"></script>

    <script type="text/javascript">
        let data_url = '{% url "get_data" dataset=dataset %}'
        let selectionButton = document.getElementById("injection_button")
        let injection_url = "{% url 'inject' dataset=dataset %}"

        fetchChart(csrftoken, data_url)

        selectionButton.addEventListener("click", e => {
            e.stopPropagation()
            inject("injection_form", csrftoken, injection_url)
        })

        let repair_url = "{% url 'repair' dataset=dataset %}"

        let repair = function (form_id) {
            repairCurrentData(form_id, csrftoken, repair_url)
        }

    </script>

{% endblock %}
